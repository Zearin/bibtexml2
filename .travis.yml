language: python

python:
  - '2.6'
  - '2.7'

before_install:
    # update aptitude
    - sudo apt-get update -y

    # install aptitude packages (pyvows requirements)
    - LDFLAGS=-lm sudo apt-get install -y libevent-dev libxml2-dev libcurl4-gnutls-dev python-pycurl-dbg

install:
    # install python requirements (package)
    - pip install docopt pygments --use-mirrors
    
    # install python requirements (testing)
    - pip install pyvows
    - pip install coveralls

    # weird travis-ci python paths
    - export PYTHONPATH=$PYTHONPATH:/usr/lib/pymodules/python2.7/
    - export PYTHONPATH=$PYTHONPATH:/usr/lib/python2.7/dist-packages
    - export PYTHONPATH=$PYTHONPATH:/usr/lib/pyshared/python2.7/
    - export PYTHONPATH=$PYTHONPATH:/usr/local/lib/python2.7/site-packages/

    # verify requirements were met
    #- INSTALLDIR=$(python -c "import os; import gevent; print(os.path.dirname(gevent.__file__))")


script:
    - export PYTHONPATH=$PYTHONPATH:/usr/lib/pymodules/python2.7/
    - export PYTHONPATH=$PYTHONPATH:/usr/lib/python2.7/dist-packages
    - export PYTHONPATH=$PYTHONPATH:/usr/lib/pyshared/python2.7/
    - export PYTHONPATH=$PYTHONPATH:/usr/local/lib/python2.7/site-packages/

    # finally run tests
    - env PYTHONPATH=. pyvows ./tests


after_success:
    - coveralls
